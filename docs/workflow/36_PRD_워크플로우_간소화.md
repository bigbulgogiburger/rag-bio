# PRD: CS Copilot 워크플로우 간소화 — "질문에서 답변까지 원클릭"

> **버전**: v1.0
> **작성일**: 2026-02-18
> **작성자**: IT Agile Planning
> **상태**: Confirmed
> **관련 PRD**: 30_PRD_v2_서비스_고도화, 35_PRD_비동기_인덱싱

---

## 0. Executive Summary

현재 CS Copilot의 문의 처리 플로우는 **5단계 수동 조작** (질문 입력 → 수동 인덱싱 → 분석 질문 재입력 → 답변 질문 재입력 → 워크플로우 진행)을 요구한다. 이는 실제 CS 상담사의 업무 패턴과 괴리가 있으며, 동일한 RAG 파이프라인(Retrieve → Verify)이 분석/답변에서 **중복 실행**되는 기술적 낭비도 존재한다.

본 PRD는 **"질문 + 파일 업로드 → 원클릭 답변 생성"** 으로 플로우를 간소화하여, CS 상담사의 평균 처리 시간을 **60% 이상 단축**하는 것을 목표로 한다.

---

## 1. 배경 및 문제 분석

### 1.1 현재 사용자 여정 (AS-IS)

```
① 문의 작성 페이지 (/inquiries/new)
   └─ 질문 입력 + 채널 선택 + PDF 업로드 → 등록

② 상세 페이지 - 기본 정보 탭 (/inquiries/{id})
   └─ [수동] "인덱싱 실행" 버튼 클릭 → 대기
   └─ 청크 수, 벡터 수, OCR 신뢰도 등 기술 지표 확인

③ 상세 페이지 - 분석 탭
   └─ [수동] 질문을 다시 입력 → "근거 검색 + 판정" 버튼 클릭
   └─ Retrieve + Verify 실행 (1차)

④ 상세 페이지 - 답변 탭
   └─ [수동] 질문을 또 다시 입력 + 톤/채널 선택 → "답변 초안 생성" 클릭
   └─ Retrieve + Verify + Compose 실행 (2차, 중복)

⑤ 워크플로우 진행
   └─ 리뷰 → 승인 → 발송
```

### 1.2 핵심 문제 5가지

| # | 문제 | 유형 | 심각도 |
|---|------|------|--------|
| **P1** | 동일 질문을 **3회 입력** (작성 / 분석 / 답변) | UX 마찰 | Critical |
| **P2** | 인덱싱이 **수동 트리거** — 파일 업로드 시 항상 필요한 단계를 왜 수동으로? | UX 마찰 | Critical |
| **P3** | Retrieve + Verify 파이프라인이 **2회 중복 실행** (분석 탭 + 답변 탭) | 기술 낭비 | High |
| **P4** | 분석 탭 결과가 답변 탭에 **전혀 연결되지 않음** — 독립 실행 | 아키텍처 결함 | High |
| **P5** | 상담사에게 **청크/벡터/OCR** 등 시스템 내부 지표 노출 | UX 과잉 정보 | Medium |

### 1.3 근본 원인: 기술 중심 설계 vs 사용자 중심 설계

```
현재 (기술 중심):
  개발자 관점의 파이프라인 단계가 그대로 UI 탭에 노출
  Upload → Parse → Chunk → Vectorize → Retrieve → Verify → Compose → Review → Approve → Send
  (10단계를 사용자가 각각 이해하고 수동 조작)

목표 (사용자 중심):
  상담사가 아는 것: "질문이 왔고, 파일이 있어. 답변 줘."
  시스템이 알아서: 파싱, 청킹, 벡터화, 검색, 판정, 초안 작성
  상담사가 하는 것: 결과 확인 → 검토 → 승인 → 발송
```

### 1.4 백엔드 아키텍처 현황 분석

**`AnswerOrchestrationService.run()` 이미 분석을 내포:**

```java
public OrchestrationResult run(UUID inquiryId, String question, String tone, String channel) {
    List<EvidenceItem> evidences = retrieveStep.execute(inquiryId, question, 5);  // Retrieve
    AnalyzeResponse analysis = verifyStep.execute(inquiryId, question, evidences); // Verify
    ComposeStepResult composed = composeStep.execute(analysis, tone, channel);     // Compose
    return new OrchestrationResult(analysis, composed.draft(), composed.formatWarnings());
}
```

- `AnswerDraftResult`에 이미 **verdict, confidence, citations, riskFlags**가 모두 포함
- 별도 분석 API 호출 없이 답변 생성만으로 분석 결과까지 확보 가능
- 분석 탭은 사실상 **답변 생성의 부분집합** (Retrieve + Verify만 실행하는 미리보기)

---

## 2. 목표 (Goals)

### 2.1 비즈니스 목표

| 목표 | 측정 지표 | 현재 | 목표값 |
|------|----------|------|--------|
| 문의당 처리 시간 단축 | 문의 접수 → 답변 초안 생성까지 클릭 수 | 7+ 클릭 | **2 클릭** |
| 질문 입력 횟수 제거 | 동일 질문 재입력 횟수 | 3회 | **1회** (최초 등록 시만) |
| RAG 파이프라인 중복 제거 | 문의당 Retrieve+Verify 호출 수 | 2회 | **1회** |
| 상담사 인지 부하 감소 | 상세 페이지 탭 수 | 4개 | **3개** |
| 신규 상담사 온보딩 | 첫 답변 생성까지 소요 시간 | 측정 없음 | **3분 이내** |

### 2.2 비목표 (Non-Goals)

- 기존 분석 API (`POST /inquiries/{id}/analysis`) 삭제 — 하위 호환 유지, deprecated 처리만
- 답변 워크플로우 상태 머신 변경 (DRAFT → REVIEWED → APPROVED → SENT 유지)
- 지식 기반(Knowledge Base) 관리 페이지 변경
- 백엔드 도메인 모델(Inquiry 엔티티) 구조 변경

---

## 3. 사용자 여정 설계 (TO-BE)

### 3.1 메인 플로우: "질문에서 답변까지"

```
① 문의 작성 (/inquiries/new)
   └─ 질문 입력 (이메일 내용 붙여넣기)
   └─ 채널 선택 (이메일 / 메신저 / 포털)
   └─ 톤 선택 (정중체 / 기술 상세 / 요약)        ← 답변 탭에서 이동
   └─ PDF/Word 파일 첨부 (선택)
   └─ [등록] 클릭

   → 시스템: 문의 생성 + 파일 업로드 + 인덱싱 자동 시작 (백그라운드)
   → 자동 리다이렉트: /inquiries/{id} 답변 탭

② 상세 페이지 - 답변 탭 (/inquiries/{id}#answer)
   └─ 인덱싱 진행 중이면: "문서 처리 중 — 근거가 부족할 수 있습니다" 경고 배너 표시 (버튼은 활성)
   └─ 인덱싱 완료되면: 경고 배너 사라지고 [답변 생성] 버튼 정상 표시
   └─ [답변 생성] 클릭 → Retrieve + Verify + Compose 1회 실행
   └─ 결과 표시:
       ├─ 분석 요약 (판정 배지 + 신뢰도 + 근거 수 + 리스크 플래그)
       ├─ 답변 본문 (드래프트)
       ├─ 참조 자료 (클릭 시 PDF 미리보기)
       └─ 워크플로우 액션 (리뷰 → 승인 → 발송)

③ 워크플로우 진행 (같은 탭 내)
   └─ 리뷰 → 승인 → 발송
```

### 3.2 사용자 클릭 수 비교

| 단계 | AS-IS | TO-BE |
|------|-------|-------|
| 질문 입력 | 3회 (작성 + 분석 + 답변) | **1회** (작성 시만) |
| 인덱싱 | 수동 클릭 1회 + 대기 | **자동** (0회) |
| 분석 실행 | 수동 클릭 1회 | **자동** (답변에 포함) |
| 답변 생성 | 수동 클릭 1회 | 수동 클릭 **1회** |
| **총 클릭** | **6+ 클릭** | **2 클릭** (등록 + 답변 생성) |

### 3.3 상세 페이지 탭 구조 변경

| 현재 (4탭) | 개선 (3탭) | 설명 |
|---|---|---|
| 기본 정보 | **문의 정보** | 메타데이터 읽기 전용 (질문, 채널, 접수일, 첨부 파일 목록) |
| 분석 | ~~제거~~ | 답변 탭에 통합 (중복 파이프라인 제거) |
| 답변 | **답변** | 분석 결과 + 초안 + 워크플로우를 하나로 통합 |
| 이력 | **이력** | 유지 (버전 히스토리 + 감사 로그) |

---

## 4. 기능 요구사항

### 4.1 [F1] 문서 업로드 시 자동 인덱싱

**현재**: 문서 업로드 후 Info 탭에서 수동으로 "인덱싱 실행" 버튼 클릭
**변경**: 문서 업로드 API 응답 후 백엔드에서 자동으로 비동기 인덱싱 시작

#### 4.1.1 백엔드 변경

```
POST /api/v1/inquiries/{id}/documents (기존 API)

AS-IS: 파일 저장 → 200 OK (status: UPLOADED)
TO-BE: 파일 저장 → 비동기 인덱싱 자동 시작 → 200 OK (status: INDEXING)
```

- 기존 `35_PRD_비동기_인덱싱`의 `@Async` + ThreadPool 설정을 문의(Inquiry) 문서에도 적용
- 문서 업로드 시 `ChunkingService.chunkAndStoreAsync()` 자동 호출
- 상태 전이: `UPLOADED → INDEXING → INDEXED / FAILED`

#### 4.1.2 프론트엔드 변경

- Info 탭에서 **"인덱싱 실행" 버튼 제거** (메인 액션에서 제외)
- **"실패 건 재시도"** 버튼만 잔류 (FAILED 상태 문서가 있을 때만 표시)
- 청크 수, 벡터 수, OCR 신뢰도 등 기술 지표 → 기본 숨김 (접이식 "상세 정보" 토글)

#### 4.1.3 수용 기준

- [ ] 문서 업로드 직후 인덱싱이 자동 시작된다 (수동 클릭 불필요)
- [ ] 인덱싱 진행 중일 때 답변 탭에 상태 표시가 나타난다
- [ ] 인덱싱 실패 시 Info 탭에서 재시도할 수 있다
- [ ] 기존 수동 인덱싱 API는 하위 호환을 위해 유지된다

---

### 4.2 [F2] 분석 탭 제거 — 답변 탭으로 통합

**현재**: 분석 탭에서 Retrieve+Verify를 실행한 뒤, 답변 탭에서 다시 Retrieve+Verify+Compose를 실행
**변경**: 답변 탭에서 한 번의 클릭으로 전체 파이프라인 실행, 분석 결과는 답변 탭 내에 표시

#### 4.2.1 답변 탭 통합 UI 구조

```
답변 탭
├── [1] 답변 생성 영역
│   ├── 톤 선택 (정중체 / 기술 상세 / 요약)     ← 문의 작성 시 선택한 값이 기본값
│   ├── 채널 (문의 작성 시 선택한 값 표시, 변경 가능)
│   ├── 인덱싱 상태 표시 (처리 중이면 경고 배너 + 버튼은 활성 유지)
│   └── [답변 생성] 버튼
│
├── [2] 분석 결과 요약 (답변 생성 후 표시)
│   ├── 판정 배지 (근거 충분 / 근거 부족 / 조건부)
│   ├── 신뢰도 점수
│   ├── 리스크 플래그 (있을 경우)
│   └── 접이식 "근거 상세 보기" → 기존 evidence 목록 + sourceType 배지
│
├── [3] 답변 본문
│   ├── 초안 텍스트 (편집 불가, 복사 가능)
│   ├── 참조 자료 목록 (클릭 시 우측 PDF 미리보기)
│   └── 형식 경고 (있을 경우)
│
├── [4] 워크플로우 액션
│   ├── 리뷰 (리뷰어 + 코멘트)
│   ├── 승인 (승인자 + 코멘트)
│   └── 발송 (발송자)
│
└── [우측 패널] 문서 미리보기 (기존 유지)
```

#### 4.2.2 백엔드 변경

- **기존 답변 초안 API 수정**: `question` 파라미터를 선택적으로 변경

```
POST /api/v1/inquiries/{id}/answers/draft

AS-IS: { "question": "필수", "tone": "...", "channel": "..." }
TO-BE: { "question": "선택 (미입력 시 inquiry.question 사용)", "tone": "...", "channel": "..." }
```

- `AnswerComposerService`가 question이 비어 있으면 `Inquiry.question` 필드를 자동 사용
- 기존 분석 API (`POST /inquiries/{id}/analysis`)는 **deprecated** 처리 (삭제 X)

#### 4.2.3 수용 기준

- [ ] 답변 탭에서 한 번의 클릭으로 분석 + 답변 초안 생성이 완료된다
- [ ] 답변 결과에 판정, 신뢰도, 근거, 리스크 플래그가 모두 표시된다
- [ ] 질문을 별도 입력하지 않아도 문의 등록 시 입력한 질문이 자동 사용된다
- [ ] 분석 탭이 상세 페이지에서 제거된다
- [ ] 기존 분석 API는 하위 호환을 위해 유지되지만, 프론트엔드에서 호출하지 않는다

---

### 4.3 [F3] 문의 작성 폼 개선

**현재**: 질문 + 채널 + 파일만 입력
**변경**: 질문 + 채널 + 톤 + 파일 입력 (답변 생성에 필요한 입력을 작성 시점에 수집)

#### 4.3.1 폼 필드 변경

| 필드 | 현재 | 변경 | 필수 |
|------|------|------|------|
| 질문 | textarea | 유지 | 필수 |
| 채널 | select (email / messenger / portal) | 유지 | 필수 |
| 톤 | _(없음, 답변 탭에서 선택)_ | **추가**: select (정중체 / 기술 상세 / 요약) | 선택 (기본값: 정중체) |
| 파일 | file input | 유지 | 선택 |

#### 4.3.2 등록 후 리다이렉트 변경

```
AS-IS: 등록 → 2초 대기 → /inquiries/{id} (기본 정보 탭)
TO-BE: 등록 → /inquiries/{id}?tab=answer (답변 탭으로 직접 이동)
```

#### 4.3.3 수용 기준

- [ ] 문의 작성 시 톤을 선택할 수 있다 (기본값: 정중체)
- [ ] 등록 후 답변 탭으로 바로 이동한다
- [ ] 파일이 있으면 인덱싱 진행 상태가 답변 탭에 표시된다

---

### 4.4 [F4] 기본 정보 탭 경량화

**현재**: 문의 메타데이터 + 인덱싱 상태 대시보드 + 수동 인덱싱 버튼 + 상세 기술 지표
**변경**: 문의 메타데이터 + 첨부 파일 목록 (읽기 전용)

#### 4.4.1 표시 항목 변경

| 항목 | 현재 | 변경 |
|------|------|------|
| 문의 정보 (상태, 채널, 질문, 접수일) | 표시 | **유지** |
| 첨부 파일 목록 (파일명, 크기, 상태 배지) | 표시 | **유지** (상태 배지를 4단계로 단순화) |
| 인덱싱 요약 메트릭 (전체/완료/실패 카드 3개) | 표시 | **제거** |
| 인덱싱 실행 버튼 | 표시 | **제거** (자동 인덱싱으로 대체) |
| 실패 건 재처리 버튼 | 표시 | **조건부 표시** (FAILED 문서 존재 시만) |
| 청크 수 / 벡터 수 / OCR 신뢰도 열 | 표시 | **접이식 토글** (기본 숨김) |

#### 4.4.2 수용 기준

- [ ] 기본 정보 탭에서 인덱싱 관련 수동 조작 UI가 제거된다
- [ ] 첨부 파일 상태가 4단계 (업로드됨/인덱싱 중/완료/실패)로 단순화된다
- [ ] 기술 상세 지표는 접이식 토글로 숨겨진다
- [ ] FAILED 문서가 있을 때만 재시도 버튼이 노출된다

---

## 5. 기술 영향도 분석

### 5.1 백엔드 변경 사항

| 영역 | 변경 내용 | 영향도 | 리스크 |
|------|----------|--------|--------|
| 문서 업로드 | 업로드 후 `@Async` 인덱싱 자동 트리거 | 수정 | 낮음 |
| 답변 초안 API | `question` 파라미터 optional 처리, 미입력 시 `inquiry.question` fallback | 수정 | 낮음 |
| Inquiry 엔티티 | `preferredTone` 필드 추가 | 수정 | 낮음 |
| 분석 API | `@Deprecated` 어노테이션 추가 | 수정 | 없음 |
| Flyway 마이그레이션 | `V15__inquiry_preferred_tone.sql` | 신규 | 낮음 |

### 5.2 프론트엔드 변경 사항

| 영역 | 변경 내용 | 영향도 |
|------|----------|--------|
| `InquiryCreateForm.tsx` | 톤 선택 필드 추가, 리다이렉트 대상 변경 | 수정 |
| `InquiryInfoTab.tsx` | 인덱싱 메트릭/버튼 제거, 경량화 | 수정 (축소) |
| `InquiryAnalysisTab.tsx` | **제거** (또는 미사용 처리) | 삭제 |
| `InquiryAnswerTab.tsx` | 분석 결과 표시 영역 추가, 질문 입력 필드 제거, 인덱싱 상태 연동 | 수정 (확대) |
| `inquiries/[id]/page.tsx` | 탭 구조 4 → 3으로 변경, 쿼리 파라미터 탭 지정 | 수정 |
| `lib/api/client.ts` | `draftInquiryAnswer`의 question 파라미터 optional 처리 | 수정 |
| `lib/i18n/labels.ts` | 문서 상태 라벨 4단계로 단순화 | 수정 |

### 5.3 데이터베이스 변경 사항

```sql
-- V15__inquiry_preferred_tone.sql
ALTER TABLE inquiries
  ADD COLUMN preferred_tone VARCHAR(40) DEFAULT 'professional';
```

---

## 6. 실행 계획

### 6.1 스프린트 구성

> **원칙**: 가장 영향력 높은 UX 개선부터 선착수 (Value-first delivery)
> 백엔드/프론트엔드 병렬 작업으로 리드타임 최소화

#### Sprint 15: 워크플로우 간소화 (2주)

**Week 1 — 백엔드 + 프론트엔드 병렬**

| ID | 작업 | 레이어 | 우선순위 | 스토리 포인트 |
|----|------|--------|---------|-------------|
| S15-01 | 문서 업로드 시 비동기 인덱싱 자동 트리거 | BE | P0 | 3 |
| S15-02 | `draftInquiryAnswer` question optional 처리 + inquiry.question fallback | BE | P0 | 2 |
| S15-03 | `preferred_tone` 컬럼 추가 (Flyway V15) | BE | P1 | 1 |
| S15-04 | 분석 API `@Deprecated` 처리 | BE | P2 | 1 |
| S15-05 | `InquiryCreateForm` 톤 선택 추가 + 리다이렉트 변경 | FE | P0 | 2 |
| S15-06 | `InquiryAnswerTab` 통합 (분석 결과 표시 + 질문 입력 제거) | FE | P0 | 5 |

**Week 2 — 통합 + 검증**

| ID | 작업 | 레이어 | 우선순위 | 스토리 포인트 |
|----|------|--------|---------|-------------|
| S15-07 | `InquiryInfoTab` 경량화 (인덱싱 UI 제거, 접이식 토글) | FE | P0 | 3 |
| S15-08 | 상세 페이지 탭 구조 변경 (4탭 → 3탭) | FE | P0 | 2 |
| S15-09 | `InquiryAnalysisTab` 코드 제거 | FE | P1 | 1 |
| S15-10 | 답변 탭 인덱싱 상태 연동 (폴링 기반 경고 배너 + 완료 시 배너 해제) | FE | P0 | 3 |
| S15-11 | E2E 시나리오 테스트 (문의 작성 → 답변 생성 → 발송) | QA | P0 | 3 |
| S15-12 | 기존 기능 회귀 테스트 | QA | P0 | 2 |

**Sprint Velocity**: 28 SP
**Sprint Goal**: CS 상담사가 문의 등록 후 2클릭 이내에 답변 초안을 확인할 수 있다.

### 6.2 User Story 정의

#### US-1: 자동 인덱싱

> **As a** CS 상담사
> **I want** 문서를 업로드하면 인덱싱이 자동으로 시작되기를
> **So that** 수동으로 인덱싱 버튼을 클릭하는 번거로움 없이 바로 답변 생성으로 넘어갈 수 있다

**Acceptance Criteria:**
- Given: 문의 작성 시 PDF 파일을 첨부한다
- When: "문의 등록" 버튼을 클릭한다
- Then: 파일이 업로드되고 인덱싱이 자동으로 시작된다
- And: 상세 페이지에서 인덱싱 진행 상태를 확인할 수 있다
- And: 인덱싱 진행 중에도 답변 생성이 가능하지만, 경고 배너가 표시된다
- And: 인덱싱 완료 후에는 경고 배너가 사라진다

#### US-2: 원클릭 답변 생성

> **As a** CS 상담사
> **I want** 문의 상세 페이지에서 한 번의 클릭으로 답변 초안을 받기를
> **So that** 분석과 답변을 각각 실행하느라 시간을 낭비하지 않는다

**Acceptance Criteria:**
- Given: 인덱싱이 완료된 문의 상세 페이지에 있다
- When: "답변 생성" 버튼을 클릭한다
- Then: 분석 결과(판정, 신뢰도, 근거)와 답변 초안이 함께 표시된다
- And: 질문을 다시 입력할 필요가 없다 (등록 시 입력한 질문이 자동 사용)

#### US-3: 통합 결과 확인

> **As a** CS 상담사
> **I want** 답변 초안과 함께 근거 검색 결과를 한 화면에서 보기를
> **So that** 답변의 신뢰도와 근거를 확인한 뒤 바로 검토/승인 절차를 진행할 수 있다

**Acceptance Criteria:**
- Given: 답변 초안이 생성되었다
- Then: 판정 배지 + 신뢰도 + 근거 수가 상단에 요약 표시된다
- And: "근거 상세 보기"를 펼치면 evidence 목록과 sourceType 배지가 보인다
- And: 참조 자료 클릭 시 우측 패널에 PDF 미리보기가 표시된다

---

## 7. 리스크 및 대응

| 리스크 | 영향 | 확률 | 대응 |
|--------|------|------|------|
| 인덱싱 자동화 시 대용량 PDF 업로드 폭주 | ThreadPool 포화, 큐 초과 | 중 | `35_PRD_비동기_인덱싱`의 ThreadPool 정책 적용 (core=2, max=4, queue=50), 초과 시 503 |
| 분석 탭 제거 시 기존 사용자 혼란 | 기존 워크플로우 학습자 불만 | 저 | 답변 탭 내 분석 결과 영역을 명확하게 표시하여 정보 누락 없음 보장 |
| question optional 처리 시 빈 질문으로 답변 생성 시도 | 의미 없는 RAG 결과 | 저 | inquiry.question이 비어 있으면 400 반환 |
| 인덱싱 미완료 상태에서 답변 생성 시도 | 근거 부족 답변 생성 | 중 | 경고 배너 표시 ("근거가 부족할 수 있습니다") + 사용자 판단에 위임. 답변 결과에도 리스크 플래그 자동 부여 |
| 기존 분석 API를 외부 시스템이 사용 중 | API 삭제 시 장애 | 저 | deprecated 처리만, 삭제하지 않음 |

---

## 8. 성공 지표 (KPI)

| 지표 | 현재 (AS-IS) | 목표 (TO-BE) | 측정 방법 |
|------|-------------|-------------|----------|
| 문의 등록 → 답변 초안 클릭 수 | 7+ | **2** | 프론트엔드 이벤트 트래킹 |
| 질문 재입력 횟수 | 3회/건 | **0회** | 답변 API 호출 시 question 파라미터 null 비율 |
| RAG 파이프라인 호출 수 | 2회/건 | **1회/건** | 오케스트레이션 런 로그 집계 |
| 신규 상담사 첫 답변 생성 시간 | 측정 없음 | **3분 이내** | 사용성 테스트 |
| 상담사 만족도 (SUS 점수) | 측정 없음 | **70점+** | 설문 |

---

## 9. 의사결정 필요 사항

| # | 항목 | 선택지 | 확정 |
|---|------|--------|------|
| D1 | 분석 탭 완전 제거 vs 숨김 처리 | (A) 탭 자체 삭제 (B) 탭 유지하되 접이식 "고급 분석" 안내 | **✅ (A) 탭 완전 삭제** — 답변 탭에 분석 결과가 모두 포함되므로 중복 UI 제거 |
| D2 | 톤 선택 위치 | (A) 문의 작성 폼에만 (B) 답변 탭에만 (C) 양쪽 모두 | **✅ (C) 양쪽 모두** — 작성 시 기본값 설정, 답변 탭에서 변경 가능 |
| D3 | 인덱싱 완료 전 답변 생성 허용 여부 | (A) 완전 차단 (B) 경고 표시 후 허용 | **✅ (B) 경고 후 허용** — "인덱싱 미완료 - 근거가 부족할 수 있습니다" 경고 표시 후 사용자 선택 |
| D4 | 기본 정보 탭 기술 지표 처리 | (A) 완전 제거 (B) 접이식 토글로 숨김 | **✅ (B) 접이식 토글** — 기본 숨김 + "상세 정보" 토글 클릭 시 노출 |

---

## 10. 부록: 전후 비교 다이어그램

### AS-IS 워크플로우

```
┌──────────────────────────────────────────────────────────────────┐
│                        사용자 액션 (7+ 클릭)                      │
├──────────┬──────────┬──────────┬──────────┬──────────┬──────────┤
│ ① 질문   │ ② 인덱싱 │ ③ 질문   │ ④ 분석   │ ⑤ 질문   │ ⑥ 답변   │
│   입력   │   클릭   │  재입력  │  실행   │  재입력  │  생성   │
├──────────┼──────────┼──────────┼──────────┼──────────┼──────────┤
│ 작성 폼  │ Info 탭  │ 분석 탭  │ 분석 탭  │ 답변 탭  │ 답변 탭  │
└──────────┴──────────┴──────────┴──────────┴──────────┴──────────┘
                       ↕ Retrieve+Verify      ↕ Retrieve+Verify+Compose
                         (1차 실행)              (2차 실행, 중복)
```

### TO-BE 워크플로우

```
┌──────────────────────────────────────────────────────────────────┐
│                        사용자 액션 (2 클릭)                       │
├──────────────────────────────┬───────────────────────────────────┤
│ ① 질문 + 채널 + 톤 + 파일  │ ② 답변 생성                       │
│   (문의 등록)               │   (원클릭, 분석+답변 통합)          │
├──────────────────────────────┼───────────────────────────────────┤
│ 작성 폼                     │ 답변 탭                            │
└──────────────────────────────┴───────────────────────────────────┘
  → 자동 인덱싱 (백그라운드)      ↕ Retrieve+Verify+Compose (1회만)
```

---

> **다음 단계**: ~~본 PRD 리뷰 → 의사결정 사항 확정 (D1~D4)~~ ✅ 완료 → Sprint 15 구현 착수
