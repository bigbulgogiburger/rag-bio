# 03. 에픽 B — 수집/인덱싱 (P0)

## 목표
문의와 첨부 문서를 안정적으로 수집하고 검색 가능한 지식으로 변환한다.

## Story B-1: 문의 + 문서 업로드
### FE
- 문의 입력폼(질문/제품군/태그)
- 다중 파일 업로드 + 진행률
### BE
- 문의 생성 API
- 파일 메타 저장 + 스토리지 연동
### DB
- inquiry/document/document_version 테이블
### AC
- PDF/Word 업로드 성공, 상태 조회 가능

## Story B-2: 파싱 및 OCR 분기
### FE
- 파싱 상태 배지 표시(PENDING/RUNNING/FAILED/READY)
### BE
- PDF/Word 파서
- 텍스트 추출 실패 시 OCR 분기
- 재시도/데드레터 큐
### DB
- indexing_job/indexing_job_event
- ocr_confidence 저장
### AC
- 스캔 PDF 포함 인덱싱 가능

## Story B-3: 청킹/임베딩/벡터 저장
### FE
- 문서 상세에서 chunk 생성 현황 표시
### BE
- chunk=1000, overlap 정책 적용
- OpenAI 임베딩 + Vector Store 업서트
### DB
- chunk 테이블(순번/메타데이터)
### AC
- chunk별 출처 추적 가능

## Story B-4: 인덱싱 운영성
### FE
- 실패건 재처리 버튼
### BE
- 재처리 API, idempotency 처리
### DB
- 재처리 이력 기록
### AC
- 운영자가 실패건을 수동 복구 가능

## 테스트 포인트
- 대용량 문서/다중 문서 동시 업로드
- OCR 실패 시 fallback 동작
